(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/components/crop/cropper"],{"20da":function(t,e,c){"use strict";var a=c("50fd"),i=c.n(a);i.a},"50fd":function(t,e,c){},"56db":function(t,e,c){"use strict";var a;c.d(e,"b",(function(){return i})),c.d(e,"c",(function(){return r})),c.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement;t._self._c},r=[]},6836:function(t,e,c){"use strict";c.r(e);var a=c("a8fa"),i=c.n(a);for(var r in a)"default"!==r&&function(t){c.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},8890:function(t,e,c){"use strict";c.r(e);var a=c("56db"),i=c("6836");for(var r in i)"default"!==r&&function(t){c.d(e,t,(function(){return i[t]}))}(r);c("20da");var u,s=c("f0c5"),o=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);e["default"]=o.exports},a8fa:function(t,e,c){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c,a,i,r,u,s,o,n,p,h,d,g=t.getSystemInfoSync(),f=g.screenWidth,l=g.windowHeight+40,m=(g.pixelRatio,1),v=g.screenWidth,w={props:{cropperWidth:{default:80,type:Number},cropperHeight:{default:80,type:Number}},data:function(){return{isShow:!1,name:"杨大宝",imageSrc:"https://img-cdn-qiniu.dcloud.net.cn/demo_crop.jpg",isShowImg:!1,cropperInitW:f,cropperInitH:l,cropperW:f,cropperH:l,cropperL:0,cropperT:0,transL:0,transT:0,scaleP:0,imageW:0,imageH:0,cutL:0,cutT:0,cutB:f,cutR:"100%",qualityWidth:v,innerAspectRadio:m}},methods:{setData:function(t){var e=this;Object.keys(t).forEach((function(c){e.$set(e.$data,c,t[c])}))},getImage:function(){var e=this;t.chooseImage({success:function(t){e.setData({imageSrc:t.tempFilePaths[0]}),e.loadImage(),e.isShow=!0}})},loadImage:function(){var e=this;t.showLoading({title:"图片加载中..."}),t.getImageInfo({src:e.imageSrc,success:function(c){var a=c.height,i=c.width,r=l/a,u=f/i;p=i/a,p<1&&r<u?(d=l-40,d=l*p>f-40?f-40:l*p):(h=f-40,d=h/p);var s=0,o=d-e.cropperHeight,n=0,g=h-e.cropperWidth;e.setData({cropperW:h,cropperH:d,cropperL:Math.ceil((f-h)/2),cropperT:Math.ceil((l-d)/2),cutL:n,cutT:s,cutR:g,cutB:o,imageW:h,imageH:d,scaleP:h/f,qualityWidth:v,innerAspectRadio:p}),e.setData({isShowImg:!0}),t.hideLoading()}})},contentStartMove:function(t){c=t.touches[0].pageX,a=t.touches[0].pageY},contentMoveing:function(t){var e=(c-t.touches[0].pageX)*m,i=(a-t.touches[0].pageY)*m;e>0?this.cutL-e<0&&(e=this.cutL):this.cutR+e<0&&(e=-this.cutR),i>0?this.cutT-i<0&&(i=this.cutT):this.cutB+i<0&&(i=-this.cutB),this.setData({cutL:this.cutL-e,cutT:this.cutT-i,cutR:this.cutR+e,cutB:this.cutB+i}),c=t.touches[0].pageX,a=t.touches[0].pageY},contentTouchEnd:function(){},getImageInfo:function(){var e=this;t.showLoading({title:"图片生成中..."});var c=t.createCanvasContext("myCanvas",e);c.drawImage(e.imageSrc,0,0,h,d),c.draw(!0,(function(){var c=(e.cropperW-e.cutL-e.cutR)/e.cropperW*h,a=(e.cropperH-e.cutT-e.cutB)/e.cropperH*d,i=e.cutL/e.cropperW*h,r=e.cutT/e.cropperH*d;t.canvasToTempFilePath({x:i,y:r,width:c,height:a,destWidth:c,destHeight:a,quality:.5,canvasId:"myCanvas",success:function(e){t.hideLoading(),t.previewImage({current:"",urls:[e.tempFilePath]})}},e)}))},finish:function(){var e=this;t.showLoading({title:"图片生成中..."});var c=t.createCanvasContext("myCanvas",e);c.drawImage(e.imageSrc,0,0,h,d),c.draw(!0,(function(){var c=(e.cropperW-e.cutL-e.cutR)/e.cropperW*h,a=(e.cropperH-e.cutT-e.cutB)/e.cropperH*d,i=e.cutL/e.cropperW*h,r=e.cutT/e.cropperH*d;t.canvasToTempFilePath({x:i,y:r,width:c,height:a,destWidth:c,destHeight:a,quality:.5,canvasId:"myCanvas",success:function(c){t.hideLoading(),e.$emit("getImg",c.tempFilePath),e.isShow=!1}},e)}))},dragStart:function(t){i=t.touches[0].pageX,r=t.touches[0].pageY,u=this.cutL,o=this.cutR,n=this.cutB,s=this.cutT},dragMove:function(t){var e=t.target.dataset.drag;switch(e){case"right":var c=(i-t.touches[0].pageX)*m;o+c<0&&(c=-o),this.setData({cutR:o+c});break;case"left":c=(i-t.touches[0].pageX)*m;u-c<0&&(c=u),u-c>this.cropperW-this.cutR&&(c=u-(this.cropperW-this.cutR)),this.setData({cutL:u-c});break;case"top":c=(r-t.touches[0].pageY)*m;s-c<0&&(c=s),s-c>this.cropperH-this.cutB&&(c=s-(this.cropperH-this.cutB)),this.setData({cutT:s-c});break;case"bottom":c=(r-t.touches[0].pageY)*m;n+c<0&&(c=-n),this.setData({cutB:n+c});break;case"rightBottom":var a=(i-t.touches[0].pageX)*m,p=(r-t.touches[0].pageY)*m;n+p<0&&(p=-n),o+a<0&&(a=-o);var h=n+p,d=o+a;this.setData({cutB:h,cutR:d});break;default:break}}}};e.default=w}).call(this,c("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/components/crop/cropper-create-component',
    {
        'pages/components/crop/cropper-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("8890"))
        })
    },
    [['pages/components/crop/cropper-create-component']]
]);
